# 细节小记  

在Unity中用到的实际上和课上讲的有所出入  
课上主要讲的是MVP矩阵  

- 1. 假设世界坐标空间是在 <0,0,0>  
- 2. 实际渲染虽然最后会转换到相机空间,但是在那之前,`对相机的旋转/平移等操作等价于反向修改了世界坐标的原点`  
- 3. Unity中由于存在子物体嵌套,所以会在CPU阶段先计算出每个子模型以及模型在世界空间坐标系下的**变换矩阵**(模型上的点的坐标从原点到当前位置的变换矩阵)`,这个就是模型矩阵(Model)
- 4. 计算世界空间坐标到摄像机空间坐标的变换矩阵(view矩阵)
- 5. 由于view和model实际上都是计算坐标变换的,所以通常会合并到一起称为`MV矩阵`
- 6. 之后会计算视锥体的变换矩阵,主要分为以下几个步骤
    - 1. 如果是透视视椎体,先转换到正交视椎体空间(通过zFar和zNear计算),正交不变
    - 2. 进行正交变换,变换到[-1,1]的立方体空间内(此时坐标仍然是三维空间坐标)  
- 7. 转换到正规立方体空间后再进行NDC(屏幕)空间的转换,这样转换后得到的就是一张2D图片

